@page "/"
@inject Service.LessonDefinitionBackendAccessService LessonDefinitionService
@inject NavigationManager navigation

<h1 class="display-3 step-up">StepUp</h1>

<h2 class="display-4">Learn and Help!</h2>

@{ var numRequests = 3; }
<div class="float-right">
    <button type="button" class="btn btn-primary" @onclick="() => goToMessages()">
        <i class="fas fa-envelope envelope"></i>  <span class="num-requests">@numRequests</span>
    </button>
</div>

@if (Lessons?.Length > 0)
{
    @foreach (var lesson in Lessons)
    {
    <div class="">
        <button class="btn btn-primary btn-julia" @onclick="() => NavigateToLesson(lesson)">
            @(lesson.lessonNumber) 
            @(lesson.lessonTitle)
        </button>
    </div>
    }
}





@code { public SEIIApp.Shared.DomainTdo.LessonDefinitionDto[] Lessons { get; set; }

    protected override async Task OnParametersSetAsync()
    {
        Lessons = await LessonDefinitionService.GetLessonOverview();
        await base.OnParametersSetAsync();
    }

    private void NavigateToLesson(SEIIApp.Shared.DomainTdo.LessonDefinitionDto lesson)
    {
        navigation.NavigateTo("/lesson/" + lesson.lessonNumber);
    }

    private void goToMessages()
    {
        navigation.NavigateTo("/Messages/");
    }
    }
